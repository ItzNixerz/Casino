<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plinko Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        #game-board {
            position: relative;
            width: 500px;
            height: 600px;
            border: 2px solid #000;
            margin: 20px auto;
            background-color: #f0f0f0;
        }
        .peg {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #333;
            border-radius: 50%;
        }
        .bin {
            width: 50px;
            height: 30px;
            margin-top: 10px;
            background-color: #4CAF50;
            border-radius: 10px;
            display: inline-block;
        }
        .ball {
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: #ff6347;
            border-radius: 50%;
        }
        #spawn-btn {
            padding: 10px 20px;
            font-size: 16px;
            margin-top: 20px;
            cursor: pointer;
        }
    </style>
</head>
<body>

<h1>Plinko Game</h1>
<button id="spawn-btn">Spawn Ball</button>
<div id="game-board">
    <!-- Pegs will be dynamically added here -->
</div>
<div id="bins">
    <div class="bin" id="bin1"></div>
    <div class="bin" id="bin2"></div>
    <div class="bin" id="bin3"></div>
    <div class="bin" id="bin4"></div>
    <div class="bin" id="bin5"></div>
</div>

<script>
// Create Pegs
const board = document.getElementById('game-board');
const rows = 5;  // number of rows of pegs
const cols = 9;  // number of columns of pegs
const pegDistance = 50; // distance between pegs

// Generate pegs on the board
function createPegs() {
    const pegOffsetX = pegDistance / 2; // to center pegs
    const pegOffsetY = pegDistance;
    
    for (let y = 0; y < rows; y++) {
        for (let x = 0; x < cols; x++) {
            if (y % 2 === 0 && x % 2 === 0) {
                const peg = document.createElement('div');
                peg.classList.add('peg');
                peg.style.top = `${y * pegOffsetY}px`;
                peg.style.left = `${x * pegOffsetX}px`;
                board.appendChild(peg);
            } else if (y % 2 !== 0 && x % 2 !== 0) {
                const peg = document.createElement('div');
                peg.classList.add('peg');
                peg.style.top = `${y * pegOffsetY}px`;
                peg.style.left = `${x * pegOffsetX}px`;
                board.appendChild(peg);
            }
        }
    }
}

// Ball drop function
function spawnBall() {
    const ball = document.createElement('div');
    ball.classList.add('ball');
    ball.style.left = '240px';  // initial horizontal position
    ball.style.top = '0px';     // start at top

    board.appendChild(ball);

    let positionX = 240; // X-axis (center of the board)
    let positionY = 0;   // Y-axis (top of the board)
    let gravity = 2;     // speed of falling

    function dropBall() {
        if (positionY < 550) {
            positionY += gravity; // make the ball fall down
            ball.style.top = `${positionY}px`;

            // Randomly change direction based on peg hit (simulate bouncing off pegs)
            if (Math.random() < 0.1) { // 10% chance to change direction
                positionX += Math.random() < 0.5 ? -20 : 20; // randomly shift left or right
            }
            ball.style.left = `${positionX}px`;

            // Continue falling
            requestAnimationFrame(dropBall);
        } else {
            // The ball has landed, assign it to a bin
            const binIndex = Math.floor((positionX - 50) / 90);
            if (binIndex >= 0 && binIndex < 5) {
                const bin = document.getElementById(`bin${binIndex + 1}`);
                bin.style.backgroundColor = "#FF5722"; // change color to indicate the ball landed
            }
        }
    }

    dropBall(); // Start dropping the ball
}

// Initialize Pegs on page load
createPegs();

// Spawn Ball Button functionality
document.getElementById('spawn-btn').addEventListener('click', spawnBall);
</script>

</body>
</html>
